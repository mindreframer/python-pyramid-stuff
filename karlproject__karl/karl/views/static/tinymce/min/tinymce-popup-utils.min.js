var tinymce=null,tinyMCEPopup,tinyMCE;tinyMCEPopup={init:function(){var d=this,e,f;e=d.getWin();tinymce=e.tinymce;tinyMCE=e.tinyMCE;d.editor=tinymce.EditorManager.activeEditor;d.params=d.editor.windowManager.params;d.features=d.editor.windowManager.features;d.dom=d.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document,{ownEvents:true,proxy:tinyMCEPopup._eventProxy});d.dom.bind(window,"ready",d._onDOMLoaded,d);if(d.features.popup_css!==false){d.dom.loadCSS(d.features.popup_css||d.editor.settings.popup_css)}d.listeners=[];d.onInit={add:function(a,c){d.listeners.push({func:a,scope:c})}};d.isWindow=!d.getWindowArg("mce_inline");d.id=d.getWindowArg("mce_window_id");d.editor.windowManager.onOpen.dispatch(d.editor.windowManager,window)},getWin:function(){return(!window.frameElement&&window.dialogArguments)||opener||parent||top},getWindowArg:function(f,d){var e=this.params[f];return tinymce.is(e)?e:d},getParam:function(c,d){return this.editor.getParam(c,d)},getLang:function(c,d){return this.editor.getLang(c,d)},execCommand:function(h,i,f,a){a=a||{};a.skip_focus=1;this.restoreSelection();return this.editor.execCommand(h,i,f,a)},resizeToInnerSize:function(){var c=this;setTimeout(function(){var a=c.dom.getViewPort(window);c.editor.windowManager.resizeBy(c.getWindowArg("mce_width")-a.w,c.getWindowArg("mce_height")-a.h,c.id||window)},10)},executeOnLoad:function(s){this.onInit.add(function(){eval(s)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var c=tinyMCEPopup;if(!c.isWindow&&tinymce.isIE){c.editor.selection.moveToBookmark(c.editor.windowManager.bookmark)}},requireLangPack:function(){var c=this,d=c.getWindowArg("plugin_url")||c.getWindowArg("theme_url");if(d&&c.editor.settings.language&&c.features.translate_i18n!==false&&c.editor.settings.language_load!==false){d+="/langs/"+c.editor.settings.language+"_dlg.js";if(!tinymce.ScriptLoader.isDone(d)){document.write('<script type="text/javascript" src="'+tinymce._addVer(d)+'"><\/script>');tinymce.ScriptLoader.markDone(d)}}},pickColor:function(c,d){this.execCommand("mceColorPicker",true,{color:document.getElementById(d).value,func:function(a){document.getElementById(d).value=a;try{document.getElementById(d).onchange()}catch(f){}}})},openBrowser:function(e,f,d){tinyMCEPopup.restoreSelection();this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,f,window)},confirm:function(d,e,f){this.editor.windowManager.confirm(d,e,f,window)},alert:function(d,e,f){this.editor.windowManager.alert(d,e,f,window)},close:function(){var d=this;function c(){d.editor.windowManager.close(window);tinymce=tinyMCE=d.editor=d.params=d.dom=d.dom.doc=null}if(tinymce.isOpera){d.getWin().setTimeout(c,0)}else{c()}},_restoreSelection:function(){var c=window.event.srcElement;if(c.nodeName=="INPUT"&&(c.type=="submit"||c.type=="button")){tinyMCEPopup.restoreSelection()}},_onDOMLoaded:function(){var f=tinyMCEPopup,j=document.title,i,k,h;if(f.features.translate_i18n!==false){k=document.body.innerHTML;if(tinymce.isIE){k=k.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')}document.dir=f.editor.getParam("directionality","");if((h=f.editor.translate(k))&&h!=k){document.body.innerHTML=h}if((h=f.editor.translate(j))&&h!=j){document.title=j=h}}if(!f.editor.getParam("browser_preferred_colors",false)||!f.isWindow){f.dom.addClass(document.body,"forceColors")}document.body.style.display="";if(tinymce.isIE){document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection);f.dom.add(f.dom.select("head")[0],"base",{target:"_self"})}f.restoreSelection();f.resizeToInnerSize();if(!f.isWindow){f.editor.windowManager.setTitle(window,j)}else{window.focus()}if(!tinymce.isIE&&!f.isWindow){f.dom.bind(document,"focus",function(){f.editor.windowManager.focus(f.id)})}tinymce.each(f.dom.select("select"),function(a){a.onkeydown=tinyMCEPopup._accessHandler});tinymce.each(f.listeners,function(a){a.func.call(a.scope,f.editor)});if(f.getWindowArg("mce_auto_focus",true)){window.focus();tinymce.each(document.forms,function(a){tinymce.each(a.elements,function(c){if(f.dom.hasClass(c,"mceFocus")&&!c.disabled){c.focus();return false}})})}document.onkeyup=tinyMCEPopup._closeWinKeyHandler},_accessHandler:function(d){d=d||window.event;if(d.keyCode==13||d.keyCode==32){var c=d.target||d.srcElement;if(c.onchange){c.onchange()}return tinymce.dom.Event.cancel(d)}},_closeWinKeyHandler:function(c){c=c||window.event;if(c.keyCode==27){tinyMCEPopup.close()}},_eventProxy:function(c){return function(a){tinyMCEPopup.dom.events.callNativeHandler(c,a)}}};tinyMCEPopup.init();function MCTabs(){this.settings=[];this.onChange=tinyMCEPopup.editor.windowManager.createInstance("tinymce.util.Dispatcher")}MCTabs.prototype.init=function(a){this.settings=a};MCTabs.prototype.getParam=function(c,a){var d=null;d=(typeof(this.settings[c])=="undefined")?a:this.settings[c];if(d=="true"||d=="false"){return(d=="true")}return d};MCTabs.prototype.showTab=function(a){a.className="current";a.setAttribute("aria-selected",true);a.setAttribute("aria-expanded",true);a.tabIndex=0};MCTabs.prototype.hideTab=function(c){var a=this;c.className="";c.setAttribute("aria-selected",false);c.setAttribute("aria-expanded",false);c.tabIndex=-1};MCTabs.prototype.showPanel=function(a){a.className="current";a.setAttribute("aria-hidden",false)};MCTabs.prototype.hidePanel=function(a){a.className="panel";a.setAttribute("aria-hidden",true)};MCTabs.prototype.getPanelForTab=function(a){return tinyMCEPopup.dom.getAttrib(a,"aria-controls")};MCTabs.prototype.displayTab=function(f,c,j){var n,e,d,l,k,a,h,m=this;d=document.getElementById(f);if(c===undefined){c=m.getPanelForTab(d)}n=document.getElementById(c);e=n?n.parentNode:null;l=d?d.parentNode:null;k=m.getParam("selection_class","current");if(d&&l){a=l.childNodes;for(h=0;h<a.length;h++){if(a[h].nodeName=="LI"){m.hideTab(a[h])}}m.showTab(d)}if(n&&e){a=e.childNodes;for(h=0;h<a.length;h++){if(a[h].nodeName=="DIV"){m.hidePanel(a[h])}}if(!j){d.focus()}m.showPanel(n)}};MCTabs.prototype.getAnchor=function(){var c,a=document.location.href;if((c=a.lastIndexOf("#"))!=-1){return a.substring(c+1)}return""};var mcTabs=new MCTabs();tinyMCEPopup.onInit.add(function(){var a=tinyMCEPopup.getWin().tinymce,d=tinyMCEPopup.dom,c=a.each;c(d.select("div.tabs"),function(i){var e;d.setAttrib(i,"role","tablist");var f=tinyMCEPopup.dom.select("li",i);var h=function(j){mcTabs.displayTab(j,mcTabs.getPanelForTab(j));mcTabs.onChange.dispatch(j)};c(f,function(j){d.setAttrib(j,"role","tab");d.bind(j,"click",function(k){h(j.id)})});d.bind(d.getRoot(),"keydown",function(j){if(j.keyCode===9&&j.ctrlKey&&!j.altKey){e.moveFocus(j.shiftKey?-1:1);a.dom.Event.cancel(j)}});c(d.select("a",i),function(j){d.setAttrib(j,"tabindex","-1")});e=tinyMCEPopup.editor.windowManager.createInstance("tinymce.ui.KeyboardNavigation",{root:i,items:f,onAction:h,actOnFocus:true,enableLeftRight:true,enableUpDown:true},tinyMCEPopup.dom)})});var Validator={isEmail:function(a){return this.test(a,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(a){return this.test(a,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(a){return this.test(a,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(a){return this.test(a,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(d){var a,c;if(d.nodeName=="SELECT"&&d.selectedIndex<1){return true}if(d.type=="checkbox"&&!d.checked){return true}if(d.type=="radio"){for(c=0,a=d.form.elements;c<a.length;c++){if(a[c].type=="radio"&&a[c].name==d.name&&a[c].checked){return false}}return true}return new RegExp("^\\s*$").test(d.nodeType==1?d.value:d)},isNumber:function(a,c){return !isNaN(a.nodeType==1?a.value:a)&&(!c||!this.test(a,"^-?[0-9]*\\.[0-9]*$"))},test:function(a,c){a=a.nodeType==1?a.value:a;return a==""||new RegExp(c).test(a)}};var AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(a){var c;for(c in a){this.settings[c]=a[c]}},validate:function(h){var d,a,e=this.settings,j=0;a=this.tags(h,"label");for(d=0;d<a.length;d++){this.removeClass(a[d],e.invalid_cls);a[d].setAttribute("aria-invalid",false)}j+=this.validateElms(h,"input");j+=this.validateElms(h,"select");j+=this.validateElms(h,"textarea");return j==3},invalidate:function(a){this.mark(a.form,a)},getErrorMessages:function(j){var a,e,m=this.settings,k,c,l,d=[],h=tinyMCEPopup.editor;a=this.tags(j,"label");for(e=0;e<a.length;e++){if(this.hasClass(a[e],m.invalid_cls)){k=document.getElementById(a[e].getAttribute("for"));l={field:a[e].textContent};if(this.hasClass(k,m.min_cls,true)){message=h.getLang("invalid_data_min");l.min=this.getNum(k,m.min_cls)}else{if(this.hasClass(k,m.number_cls)){message=h.getLang("invalid_data_number")}else{if(this.hasClass(k,m.size_cls)){message=h.getLang("invalid_data_size")}else{message=h.getLang("invalid_data")}}}message=message.replace(/{\#([^}]+)\}/g,function(i,f){return l[f]||"{#"+f+"}"});d.push(message)}}return d},reset:function(k){var f=["label","input","select","textarea"];var d,c,a,h=this.settings;if(k==null){return}for(d=0;d<f.length;d++){a=this.tags(k.form?k.form:k,f[d]);for(c=0;c<a.length;c++){this.removeClass(a[c],h.invalid_cls);a[c].setAttribute("aria-invalid",false)}}},validateElms:function(h,j){var a,d,c,o=this.settings,m=true,k=Validator,l;a=this.tags(h,j);for(d=0;d<a.length;d++){c=a[d];this.removeClass(c,o.invalid_cls);if(this.hasClass(c,o.required_cls)&&k.isEmpty(c)){m=this.mark(h,c)}if(this.hasClass(c,o.number_cls)&&!k.isNumber(c)){m=this.mark(h,c)}if(this.hasClass(c,o.int_cls)&&!k.isNumber(c,true)){m=this.mark(h,c)}if(this.hasClass(c,o.url_cls)&&!k.isAbsUrl(c)){m=this.mark(h,c)}if(this.hasClass(c,o.email_cls)&&!k.isEmail(c)){m=this.mark(h,c)}if(this.hasClass(c,o.size_cls)&&!k.isSize(c)){m=this.mark(h,c)}if(this.hasClass(c,o.id_cls)&&!k.isId(c)){m=this.mark(h,c)}if(this.hasClass(c,o.min_cls,true)){l=this.getNum(c,o.min_cls);if(isNaN(l)||parseInt(c.value)<parseInt(l)){m=this.mark(h,c)}}if(this.hasClass(c,o.max_cls,true)){l=this.getNum(c,o.max_cls);if(isNaN(l)||parseInt(c.value)>parseInt(l)){m=this.mark(h,c)}}}return m},hasClass:function(f,e,a){return new RegExp("\\b"+e+(a?"[0-9]+":"")+"\\b","g").test(f.className)},getNum:function(d,a){a=d.className.match(new RegExp("\\b"+a+"([0-9]+)\\b","g"))[0];a=a.replace(/[^0-9]/g,"");return a},addClass:function(f,e,a){var d=this.removeClass(f,e);f.className=a?e+(d!=""?(" "+d):""):(d!=""?(d+" "):"")+e},removeClass:function(d,a){a=d.className.replace(new RegExp("(^|\\s+)"+a+"(\\s+|$)")," ");return d.className=a!=" "?a:""},tags:function(c,a){return c.getElementsByTagName(a)},mark:function(c,d){var a=this.settings;this.addClass(d,a.invalid_cls);d.setAttribute("aria-invalid","true");this.markLabels(c,d,a.invalid_cls);return false},markLabels:function(e,h,a){var c,d;c=this.tags(e,"label");for(d=0;d<c.length;d++){if(c[d].getAttribute("for")==h.id||c[d].htmlFor==h.id){this.addClass(c[d],a)}}return null}};var themeBaseURL=tinyMCEPopup.editor.baseURI.toAbsolute("themes/"+tinyMCEPopup.getParam("theme"));function getColorPickerHTML(e,c){var a="",d=tinyMCEPopup.dom;if(label=d.select("label[for="+c+"]")[0]){label.id=label.id||d.uniqueId()}a+='<a role="button" aria-labelledby="'+e+'_label" id="'+e+'_link" href="javascript:;" onclick="tinyMCEPopup.pickColor(event,\''+c+'\');" onmousedown="return false;" class="pickcolor">';a+='<span id="'+e+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;<span id="'+e+'_label" class="mceVoiceLabel mceIconOnly" style="display:none;">'+tinyMCEPopup.getLang("browse")+"</span></span></a>";return a}function updateColor(c,a){document.getElementById(c).style.backgroundColor=document.forms[0].elements[a].value}function setBrowserDisabled(e,c){var a=document.getElementById(e);var d=document.getElementById(e+"_link");if(d){if(c){d.setAttribute("realhref",d.getAttribute("href"));d.removeAttribute("href");tinyMCEPopup.dom.addClass(a,"disabled")}else{if(d.getAttribute("realhref")){d.setAttribute("href",d.getAttribute("realhref"))}tinyMCEPopup.dom.removeClass(a,"disabled")}}}function getBrowserHTML(i,f,e,h){var d=h+"_"+e+"_browser_callback",a,c;a=tinyMCEPopup.getParam(d,tinyMCEPopup.getParam("file_browser_callback"));if(!a){return""}c="";c+='<a id="'+i+'_link" href="javascript:openBrowser(\''+i+"','"+f+"', '"+e+"','"+d+'\');" onmousedown="return false;" class="browse">';c+='<span id="'+i+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;</span></a>';return c}function openBrowser(c,f,e,d){var a=document.getElementById(c);if(a.className!="mceButtonDisabled"){tinyMCEPopup.openBrowser(f,e,d)}}function selectByValue(a,d,j,h,k){if(!a||!a.elements[d]){return}if(!j){j=""}var c=a.elements[d];var l=false;for(var e=0;e<c.options.length;e++){var f=c.options[e];if(f.value==j||(k&&f.value.toLowerCase()==j.toLowerCase())){f.selected=true;l=true}else{f.selected=false}}if(!l&&h&&j!=""){var f=new Option(j,j);f.selected=true;c.options[c.options.length]=f;c.selectedIndex=c.options.length-1}return l}function getSelectValue(a,c){var d=a.elements[c];if(d==null||d.options==null||d.selectedIndex===-1){return""}return d.options[d.selectedIndex].value}function addSelectValue(a,e,c,f){var d=a.elements[e];var h=new Option(c,f);d.options[d.options.length]=h}function addClassesToList(k,h){var d=document.getElementById(k);var e=tinyMCEPopup.getParam("theme_advanced_styles",false);e=tinyMCEPopup.getParam(h,e);if(e){var j=e.split(";");for(var c=0;c<j.length;c++){if(j!=""){var a,f;a=j[c].split("=")[0];f=j[c].split("=")[1];d.options[d.length]=new Option(a,f)}}}else{tinymce.each(tinyMCEPopup.editor.dom.getClasses(),function(i){d.options[d.length]=new Option(i.title||i["class"],i["class"])})}}function isVisible(a){var c=document.getElementById(a);return c&&c.style.display!="none"}function convertRGBToHex(c){var d=new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi");var a=c.replace(d,"$1,$2,$3").split(",");if(a.length==3){r=parseInt(a[0]).toString(16);g=parseInt(a[1]).toString(16);b=parseInt(a[2]).toString(16);r=r.length==1?"0"+r:r;g=g.length==1?"0"+g:g;b=b.length==1?"0"+b:b;return"#"+r+g+b}return c}function convertHexToRGB(a){if(a.indexOf("#")!=-1){a=a.replace(new RegExp("[^0-9A-F]","gi"),"");r=parseInt(a.substring(0,2),16);g=parseInt(a.substring(2,4),16);b=parseInt(a.substring(4,6),16);return"rgb("+r+","+g+","+b+")"}return a}function trimSize(a){return a.replace(/([0-9\.]+)(px|%|in|cm|mm|em|ex|pt|pc)/i,"$1$2")}function getCSSSize(a){a=trimSize(a);if(a==""){return""}if(/^[0-9]+$/.test(a)){a+="px"}else{if(!(/^[0-9\.]+(px|%|in|cm|mm|em|ex|pt|pc)$/i.test(a))){return""}}return a}function getStyle(e,c,a){var d=tinyMCEPopup.dom.getAttrib(e,c);if(d!=""){return""+d}if(typeof(a)=="undefined"){a=c}return tinyMCEPopup.dom.getStyle(e,a)}var TinyMCE_EditableSelects={editSelectElm:null,init:function(){var a=document.getElementsByTagName("select"),c,f=document,e;for(c=0;c<a.length;c++){if(a[c].className.indexOf("mceEditableSelect")!=-1){e=new Option(tinyMCEPopup.editor.translate("value"),"__mce_add_custom__");e.className="mceAddSelectValue";a[c].options[a[c].options.length]=e;a[c].onchange=TinyMCE_EditableSelects.onChangeEditableSelect}}},onChangeEditableSelect:function(f){var h=document,c,a=window.event?window.event.srcElement:f.target;if(a.options[a.selectedIndex].value=="__mce_add_custom__"){c=h.createElement("input");c.id=a.id+"_custom";c.name=a.name+"_custom";c.type="text";c.style.width=a.offsetWidth+"px";a.parentNode.insertBefore(c,a);a.style.display="none";c.focus();c.onblur=TinyMCE_EditableSelects.onBlurEditableSelectInput;c.onkeydown=TinyMCE_EditableSelects.onKeyDown;TinyMCE_EditableSelects.editSelectElm=a}},onBlurEditableSelectInput:function(){var a=TinyMCE_EditableSelects.editSelectElm;if(a){if(a.previousSibling.value!=""){addSelectValue(document.forms[0],a.id,a.previousSibling.value,a.previousSibling.value);selectByValue(document.forms[0],a.id,a.previousSibling.value)}else{selectByValue(document.forms[0],a.id,"")}a.style.display="inline";a.parentNode.removeChild(a.previousSibling);TinyMCE_EditableSelects.editSelectElm=null}},onKeyDown:function(a){a=a||window.event;if(a.keyCode==13){TinyMCE_EditableSelects.onBlurEditableSelectInput()}}};